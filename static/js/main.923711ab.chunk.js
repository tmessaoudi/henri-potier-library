(this["webpackJsonphenri-potier-library"]=this["webpackJsonphenri-potier-library"]||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(5),l=n.n(o),c=(n(14),n(2)),i=n(7),s=Object({NODE_ENV:"production",PUBLIC_URL:"/henri-potier-library",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).DOMAIN_URL,u=void 0===s?"http://henri-potier.xebia.fr":s,m=function(e){return fetch("".concat(u).concat(e)).then((function(e){return e.json()}))},d=n(8),f=function(e){var t=e.book,n=e.cart,a=e.setCart,o=!!n.find((function(e){return e.isbn===t.isbn}));return r.a.createElement("div",{className:"h-56 max-w-full flex mb-3"},r.a.createElement("img",{src:t.cover,alt:t.title,className:"h-auto w-48 flex-none bg-cover  rounded-t-none rounded-l text-center overflow-hidden"}),r.a.createElement("div",{className:"border-r border-b border-l border-gray-400 border-l-0 border-t ".concat(o?"bg-gray-300":"bg-white"," rounded-b lg:rounded-r p-4 leading-normal flex")},r.a.createElement("div",{className:"flex flex-col flex-grow justify-between"},r.a.createElement("div",{className:"text-gray-900 font-bold text-xl mb-2"},t.title),r.a.createElement("p",{className:"text-gray-700 text-base mb-8 text-ellipsis"},t.synopsis.join(" ")),r.a.createElement("p",{className:"text-xl text-gray-800 leading-3 font-semibold"}," Prix : ",t.price," \u20ac")),r.a.createElement("div",{className:" pl-10 flex flex-col justify-around"},r.a.createElement("button",{onClick:o?function(){return a(n.filter((function(e){return e.isbn!==t.isbn})))}:function(){return a([].concat(Object(d.a)(n),[t]))}},o?r.a.createElement("svg",{viewBox:"0 0 20 20",fill:"currentColor",className:"h-12 text-center"},r.a.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 000 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})):r.a.createElement("svg",{viewBox:"0 0 20 20",fill:"currentColor",className:"h-12 text-center"},r.a.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z",clipRule:"evenodd"}))))))},b={percentage:function(e,t){return e*(100-t.value)/100},minus:function(e,t){return e-t.value},slice:function(e,t){return e>=t.sliceValue?e-t.value:e}},h=function(e,t){return function(e,t){var n=e.map((function(e){return e.price})).reduce((function(e,t){return e+t}));return t.sort((function(e,t){return b[e.type](n,e)-b[t.type](n,t)})).map((function(e){return[e,b[e.type](n,e)]}))}(e,t)[0]},v=function(e){var t=e.cart,n=Object(a.useState)(0),o=Object(c.a)(n,2),l=o[0],i=o[1];return Object(a.useEffect)((function(){fetch("".concat(u,"/books/").concat(t.map((function(e){return e.isbn})).join(","),"/commercialOffers")).then((function(e){return e.json()})).then((function(e){return i(h(t,e.offers)[1])})),t.length||i(0)}),[t]),r.a.createElement("header",{className:"bg-gray-300 flex justify-around inset-y-0 sticky"},r.a.createElement("div",null),r.a.createElement("h1",{className:"text-center text-4xl font-bold"},"La biblioth\xe8que d'Henri Potier"),r.a.createElement("div",{className:"flex p-3"},r.a.createElement("svg",{viewBox:"0 0 20 20",fill:"currentColor",className:"w-10 h-10"},r.a.createElement("path",{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"})),r.a.createElement("span",{className:"pl-2 text-2xl"},t.length),r.a.createElement("span",{className:"pl-2 text-2xl"},l,"\u20ac")))};var p=function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],o=t[1],l=Object(i.a)("/books",m),s=l.data,u=(l.error,Object(a.useState)("")),d=Object(c.a)(u,2),b=d[0],h=d[1],p=null===s||void 0===s?void 0:s.filter((function(e){return e.title.toLocaleLowerCase().includes(b.toLocaleLowerCase())||e.isbn.toLocaleLowerCase().includes(b.toLocaleLowerCase())}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(v,{cart:n}),r.a.createElement("main",null,r.a.createElement("div",{className:"my-5 mx-auto w-1/2"},r.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"search"},"Rechercher un livre"),r.a.createElement("input",{onChange:function(e){return h(e.target.value)},className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"search",type:"text",placeholder:"Titre, ISBN, ..."})),r.a.createElement("div",{className:"mx-auto w-2/3"},null===p||void 0===p?void 0:p.map((function(e){return r.a.createElement(f,{key:e.isbn,cart:n,setCart:o,book:e})})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(p,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},9:function(e,t,n){e.exports=n(15)}},[[9,1,2]]]);
//# sourceMappingURL=main.923711ab.chunk.js.map